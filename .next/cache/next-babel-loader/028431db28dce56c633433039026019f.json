{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport { ApolloClient, InMemoryCache, createHttpLink } from \"@apollo/client\";\nimport { setContext } from \"apollo-link-context\";\nimport fetch from \"isomorphic-unfetch\";\nimport Cookie from \"js-cookie\";\nimport { useMemo } from \"react\";\nvar SERVER_URL = \"https://edfhr-dashboard-724077.us1.kinto.io\";\nvar apolloClient = null;\n\nif (!true) {\n  global.fetch = fetch;\n}\n\nfunction create(initialState, token) {\n  var link = createHttpLink({\n    uri: false ? \"\".concat(SERVER_URL, \"/api/graphql\") : \"/api/graphql\",\n    fetch: fetch\n  });\n  var authLink = setContext(function () {\n    return {\n      headers: {\n        Authorization: \"Bearer \".concat(token || Cookie.get(\"token\")) || \"\"\n      }\n    };\n  });\n  return new ApolloClient({\n    connectToDevTools: true,\n    ssrMode: !true,\n    // Disables forceFetch on the server (so queries are only run once)\n    link: authLink.concat(link),\n    cache: new InMemoryCache().restore(initialState || {})\n  });\n}\n\nexport var initializeApollo = function initializeApollo(initialState, options) {\n  // Make sure to create a new client for every server-side request so that data\n  // isn't shared between connections (which would be bad)\n  if (!true) {\n    return create(initialState, options);\n  } // Reuse client on the client-side\n\n\n  if (!apolloClient) {\n    apolloClient = create(initialState, options);\n  }\n\n  return apolloClient;\n};\nexport var useApollo = function useApollo(initialState) {\n  _s();\n\n  var store = useMemo(function () {\n    return initializeApollo(initialState);\n  }, [initialState]);\n  return store;\n};\n\n_s(useApollo, \"K8ucUnUnAgJZGJWAL9Ze8IHCmoQ=\");","map":{"version":3,"sources":["/home/peter/Desktop/projects/hela/law-3/src/apollo/index.js"],"names":["ApolloClient","InMemoryCache","createHttpLink","setContext","fetch","Cookie","useMemo","SERVER_URL","apolloClient","global","create","initialState","token","link","uri","authLink","headers","Authorization","get","connectToDevTools","ssrMode","concat","cache","restore","initializeApollo","options","useApollo","store"],"mappings":";;AAAA,SAASA,YAAT,EAAuBC,aAAvB,EAAsCC,cAAtC,QAA4D,gBAA5D;AAEA,SAASC,UAAT,QAA2B,qBAA3B;AACA,OAAOC,KAAP,MAAkB,oBAAlB;AACA,OAAOC,MAAP,MAAmB,WAAnB;AACA,SAASC,OAAT,QAAwB,OAAxB;AAEA,IAAMC,UAAU,GAAG,6CAAnB;AAEA,IAAIC,YAAY,GAAG,IAAnB;;AAEA,IAAI,KAAJ,EAAsB;AACpBC,EAAAA,MAAM,CAACL,KAAP,GAAeA,KAAf;AACD;;AAED,SAASM,MAAT,CAAgBC,YAAhB,EAA8BC,KAA9B,EAAqC;AACnC,MAAIC,IAAI,GAAGX,cAAc,CAAC;AACxBY,IAAAA,GAAG,EACD,kBACOP,UADP,oBAEI,cAJkB;AAMxBH,IAAAA,KAAK,EAALA;AANwB,GAAD,CAAzB;AASA,MAAMW,QAAQ,GAAGZ,UAAU,CAAC,YAAM;AAChC,WAAO;AACLa,MAAAA,OAAO,EAAE;AACPC,QAAAA,aAAa,EAAE,iBAAUL,KAAK,IAAIP,MAAM,CAACa,GAAP,CAAW,OAAX,CAAnB,KAA4C;AADpD;AADJ,KAAP;AAKD,GAN0B,CAA3B;AAQA,SAAO,IAAIlB,YAAJ,CAAiB;AACtBmB,IAAAA,iBAAiB,MADK;AAEtBC,IAAAA,OAAO,EAAE,KAFa;AAEK;AAC3BP,IAAAA,IAAI,EAAEE,QAAQ,CAACM,MAAT,CAAgBR,IAAhB,CAHgB;AAItBS,IAAAA,KAAK,EAAE,IAAIrB,aAAJ,GAAoBsB,OAApB,CAA4BZ,YAAY,IAAI,EAA5C;AAJe,GAAjB,CAAP;AAMD;;AAED,OAAO,IAAMa,gBAAgB,GAAG,SAAnBA,gBAAmB,CAACb,YAAD,EAAec,OAAf,EAA2B;AACzD;AACA;AACA,MAAI,KAAJ,EAAsB;AACpB,WAAOf,MAAM,CAACC,YAAD,EAAec,OAAf,CAAb;AACD,GALwD,CAOzD;;;AACA,MAAI,CAACjB,YAAL,EAAmB;AACjBA,IAAAA,YAAY,GAAGE,MAAM,CAACC,YAAD,EAAec,OAAf,CAArB;AACD;;AAED,SAAOjB,YAAP;AACD,CAbM;AAeP,OAAO,IAAMkB,SAAS,GAAG,SAAZA,SAAY,CAACf,YAAD,EAAkB;AAAA;;AACzC,MAAMgB,KAAK,GAAGrB,OAAO,CAAC;AAAA,WAAMkB,gBAAgB,CAACb,YAAD,CAAtB;AAAA,GAAD,EAAuC,CAACA,YAAD,CAAvC,CAArB;AACA,SAAOgB,KAAP;AACD,CAHM;;GAAMD,S","sourcesContent":["import { ApolloClient, InMemoryCache, createHttpLink } from \"@apollo/client\";\n\nimport { setContext } from \"apollo-link-context\";\nimport fetch from \"isomorphic-unfetch\";\nimport Cookie from \"js-cookie\";\nimport { useMemo } from \"react\";\n\nconst SERVER_URL = \"https://edfhr-dashboard-724077.us1.kinto.io\";\n\nlet apolloClient = null;\n\nif (!process.browser) {\n  global.fetch = fetch;\n}\n\nfunction create(initialState, token) {\n  let link = createHttpLink({\n    uri:\n      process.env.NODE_ENV !== \"development\"\n        ? `${SERVER_URL}/api/graphql`\n        : \"/api/graphql\",\n\n    fetch,\n  });\n\n  const authLink = setContext(() => {\n    return {\n      headers: {\n        Authorization: `Bearer ${token || Cookie.get(\"token\")}` || \"\",\n      },\n    };\n  });\n\n  return new ApolloClient({\n    connectToDevTools: process.browser,\n    ssrMode: !process.browser, // Disables forceFetch on the server (so queries are only run once)\n    link: authLink.concat(link),\n    cache: new InMemoryCache().restore(initialState || {}),\n  });\n}\n\nexport const initializeApollo = (initialState, options) => {\n  // Make sure to create a new client for every server-side request so that data\n  // isn't shared between connections (which would be bad)\n  if (!process.browser) {\n    return create(initialState, options);\n  }\n\n  // Reuse client on the client-side\n  if (!apolloClient) {\n    apolloClient = create(initialState, options);\n  }\n\n  return apolloClient;\n};\n\nexport const useApollo = (initialState) => {\n  const store = useMemo(() => initializeApollo(initialState), [initialState]);\n  return store;\n};\n"]},"metadata":{},"sourceType":"module"}